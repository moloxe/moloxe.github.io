function h(s){const a=s.canvas;a.style.cursor="grab";let o=!1,i,r;function d(e){o=!0,i=e.x,r=e.y}document.addEventListener("mousedown",({clientX:e,clientY:n})=>{d({x:e,y:n}),a.style.cursor="grabbing"}),document.addEventListener("touchstart",({changedTouches:e})=>{const n=e[0];d({x:n.clientX,y:n.clientY})});function u(e){s.camera.spherical.theta+=3*(i-e.x)/window.innerWidth,s.camera.spherical.phi+=3*(r-e.y)/window.innerHeight,i=e.x,r=e.y}document.addEventListener("mousemove",e=>{o&&u({x:e.clientX,y:e.clientY})}),document.addEventListener("touchmove",e=>{if(!o)return;const n=e.changedTouches[0];u({x:n.clientX,y:n.clientY})}),document.addEventListener("mouseup",()=>{o=!1,a.style.cursor="grab"}),document.addEventListener("touchend",()=>{o=!1}),document.addEventListener("wheel",e=>{s.camera.spherical.radius+=e.deltaY*.001});const t=[0,0,0],c=.002;l(e=>{const n=s.camera.spherical.theta;e.UP&&(t[1]+=c),e.DOWN&&(t[1]-=c),e.FRONT&&(t[0]-=c*Math.sin(n),t[2]-=c*Math.cos(n)),e.BACK&&(t[0]+=c*Math.sin(n),t[2]+=c*Math.cos(n)),e.LEFT&&(t[0]-=c*Math.cos(n),t[2]+=c*Math.sin(n)),e.RIGHT&&(t[0]+=c*Math.cos(n),t[2]-=c*Math.sin(n)),s.camera.pos.x+=t[0],s.camera.pos.y+=t[1],s.camera.pos.z+=t[2],t[0]*=.9,t[1]*=.9,t[2]*=.9})}function l(s){const a={};window.addEventListener("keydown",i=>{i.preventDefault(),a[i.code]=!0}),window.addEventListener("keyup",i=>{i.preventDefault(),a[i.code]=!1});function o(){s({UP:a.Space,DOWN:a.MetaLeft||a.ControlLeft,FRONT:a.KeyW,BACK:a.KeyS,LEFT:a.KeyA,RIGHT:a.KeyD}),requestAnimationFrame(o)}o()}export{h as f};
