import{v as m,w as h}from"./runtime-dom.esm-bundler.6ODDVAh6.js";import{P as v}from"./posts.ox26wUVb.js";import{_ as w}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as x,c as n,a as _,b as t,w as y,t as P,F as k,r,o as i}from"./runtime-core.esm-bundler.Ds1MczRr.js";import"./utils.CQiKqG6B.js";const M=x({__name:"CreatePostModal",setup(g,{expose:a}){a();const s=r(!1),e=r(""),o=r(""),l=r(!1);function c(){o.value="",s.value=!0}function f(){o.value="",s.value=!1}async function b(){l.value=!0;const p=e.value;e.value="";try{const d=await v.createPost(p);window.location.href=`/blog/${d}`,f()}catch(d){o.value=String(d)}finally{l.value=!1}}const u={show:s,newPostTitle:e,errorMessage:o,loadingState:l,openModal:c,closeModal:f,createPost:b};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),C={key:0,class:"fixed z-10 flex top-0 bottom-0 right-0 left-0"},S={class:"flex flex-col gap-2 z-30 p-4 m-auto max-w-md bg-neutral-900 rounded"},T=t("h1",{class:"title"},"Create post",-1),B={class:"flex gap-2 flex-nowrap"},N=["disabled"],V=["disabled"],z=["disabled"],D={key:0,class:"bg-red-700 text-white"},F={key:1};function K(g,a,s,e,o,l){return i(),n(k,null,[e.show?(i(),n("div",C,[t("div",{class:"absolute flex top-0 bottom-0 right-0 left-0 bg-black bg-opacity-80",onClick:e.closeModal}),t("div",S,[T,t("div",B,[y(t("input",{class:"grow-[6]",placeholder:"Title...","onUpdate:modelValue":a[0]||(a[0]=c=>e.newPostTitle=c),disabled:e.loadingState,type:"text",required:"",onKeydown:h(e.createPost,["enter"])},null,40,N),[[m,e.newPostTitle]]),t("button",{disabled:e.loadingState,onClick:e.createPost,title:"create"}," ✅ ",8,V),t("button",{disabled:e.loadingState,onClick:e.closeModal,title:"cancel"}," ❌ ",8,z)]),e.errorMessage?(i(),n("div",D,P(e.errorMessage),1)):_("",!0),e.loadingState?(i(),n("p",F,"Loading...")):_("",!0)])])):_("",!0),t("button",{class:"bg-white text-black absolute right-0 opacity-50",onClick:e.openModal}," New post ")],64)}const O=w(M,[["render",K]]);export{O as default};
