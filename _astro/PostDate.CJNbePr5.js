import{v as k,w as q}from"./runtime-dom.esm-bundler.CYyYcAJ2.js";import{a as _,G as h}from"./utils.CQiKqG6B.js";import{_ as w}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as B,c as a,o as n,w as v,b as p,e as u,t as D,F as U,k as C,n as A,r as y,a as G,g as P,s as j}from"./runtime-core.esm-bundler.7S3usXxS.js";const z=B({__name:"GiphyBlock",props:{editMode:{type:Boolean},block:{}},setup(m,{expose:r}){r();const t=m,e=y(x()),i=y(""),d=y([]),o=G(()=>e.value!==""&&typeof e.value=="string"),c=G({get(){return _.getQuoteFromGiphyBlock(t.block.text)??""},set(s){const l=_.getIdFromGiphyBlock(t.block.text);t.block.text=_.formatGiphyBlock(l,s)}});async function f(){const s=i.value,l=[],F=await h.searchGifs(s,navigator.language);for(const b of F){const S=b?.images?.fixed_height?.url;l.push({id:b?.id,url:S})}d.value=l}function M(s,l){l||(l=h.getGifById(s)),e.value=l,t.block.text=_.formatGiphyBlock(s,c.value)}function x(){const s=_.getIdFromGiphyBlock(t.block.text);return h.getGifById(s)}P(()=>{t.editMode&&f()}),j(()=>t.editMode,s=>{s&&f()});const g={props:t,url:e,currentQuery:i,samples:d,existUrl:o,quote:c,searchGifsAction:f,loadGif:M,getFirstGifLoad:x};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),I={key:1,class:"relative flex place-items-center bg-black bg-opacity-30"},Q=["src"],V={key:0,class:"absolute top-0 left-0 right-0 bottom-0 bg-[#333a]"},N={key:1,class:"flex absolute w-full h-full"},O={class:"font-sans m-auto p-4 text-center text-2xl font-bold"},E={key:2,class:"flex flex-col w-full"},J={class:"flex w-full h-10"},K={class:"flex overflow-x-scroll h-[10rem]"},L={class:"flex"},T=["src","onClick"];function W(m,r,t,e,i,d){return n(),a("div",{class:A(`w-full flex flex-col ${t.editMode?"edit-block":""}`)},[t.editMode?v((n(),a("input",{key:0,"onUpdate:modelValue":r[0]||(r[0]=o=>e.quote=o),type:"text",class:"flex-1 p-2 w-full",placeholder:"Write something...","aria-label":"gif quote input"},null,512)),[[k,e.quote]]):p("",!0),e.existUrl?(n(),a("div",I,[u("img",{loading:"lazy",class:"m-auto w-auto h-80 object-cover",src:e.url,alt:"gif-block"},null,8,Q),e.quote&&e.existUrl?(n(),a("div",V)):p("",!0),e.quote&&e.existUrl?(n(),a("div",N,[u("p",O,D(e.quote),1)])):p("",!0)])):p("",!0),t.editMode?(n(),a("div",E,[u("div",J,[v(u("input",{"onUpdate:modelValue":r[1]||(r[1]=o=>e.currentQuery=o),type:"text",placeholder:"Search gif (Giphy)","aria-label":"gifs search input",class:"flex-1 px-3",onKeydown:q(e.searchGifsAction,["enter"])},null,544),[[k,e.currentQuery]]),u("button",{class:"bg-primary p-0 w-10",onClick:e.searchGifsAction}," 🔍 ")]),u("div",K,[u("div",L,[(n(!0),a(U,null,C(e.samples,({id:o,url:c})=>(n(),a("img",{key:o,src:c,class:"block w-[10rem] h-auto object-cover cursor-pointer",loading:"lazy",onClick:f=>e.loadGif(o,c)},null,8,T))),128))])])])):p("",!0)],2)}const te=w(z,[["render",W]]),Y=B({__name:"PostDate",props:{creationDate:{}},setup(m,{expose:r}){r();function t(i){const d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],o=i.getDate(),c=d[i.getMonth()],f=i.getFullYear();return`${c} ${o}, ${f}`}const e={parseDate:t};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),H={class:"text-neutral-400 text-xs"};function R(m,r,t,e,i,d){return n(),a("div",H,D(e.parseDate(t.creationDate)),1)}const oe=w(Y,[["render",R]]);export{te as G,oe as P};
