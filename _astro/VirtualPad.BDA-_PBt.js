import{_ as f}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as C,c as m,F as w,B as F,r as p,e as B,C as h,o as A,D as M,t as k}from"./runtime-core.esm-bundler.m-8sdNnM.js";const d={C2:65.41,"C#2/Db2":69.3,D2:73.42,"D#2/Eb2":77.78,E2:82.41,F2:87.31,"F#2/Gb2":92.5,G2:98,"G#2/Ab2":103.83,A2:110,"A#2/Bb2":116.54,B2:123.47,C3:130.81,"C#3/Db3":138.59,D3:146.83,"D#3/Eb3":155.56,E3:164.81,F3:174.61,"F#3/Gb3":185,G3:196,"G#3/Ab3":207.65,A3:220,"A#3/Bb3":233.08,B3:246.94,C4:261.63,"C#4/Db4":277.18,D4:293.66,"D#4/Eb4":311.13,E4:329.63,F4:349.23,"F#4/Gb4":369.99,G4:392,"G#4/Ab4":415.3,A4:440,"A#4/Bb4":466.16,B4:493.88,C5:523.25,"C#5/Db5":554.37,D5:587.33,"D#5/Eb5":622.25,E5:659.25,F5:698.46,"F#5/Gb5":739.99,G5:783.99,"G#5/Ab5":830.61,A5:880,"A#5/Bb5":932.33,B5:987.77},g={KeyZ:"C4",KeyS:"C#4/Db4",KeyX:"D4",KeyD:"D#4/Eb4",KeyC:"E4",KeyV:"F4",KeyG:"F#4/Gb4",KeyB:"G4",KeyH:"G#4/Ab4",KeyN:"A4",KeyJ:"A#4/Bb4",Backquote:"A#4/Bb4",KeyM:"B4",Comma:"C5",KeyQ:"C5",Digit2:"C#5/Db5",KeyL:"C#5/Db5",KeyW:"D5",Period:"D5",Digit3:"D#5/Eb5",Semicolon:"D#5/Eb5",KeyE:"E5",Slash:"E5",KeyR:"F5",ShiftRight:"F5",Digit5:"F#5/Gb5",KeyT:"G5",Digit6:"G#5/Ab5",KeyY:"A5",Digit7:"A#5/Bb5",KeyU:"B5",KeyI:"C6",Digit9:"C#6/Db6",KeyO:"D6",Digit0:"D#6/Eb6",KeyP:"E6",BracketLeft:"F6",Equal:"F#6/Gb6",BracketRight:"G6"},L=C({__name:"VirtualPad",setup(K,{expose:E}){E();const n=p(0),o=p({}),b=p(Object.keys(d).map(e=>({text:e,onMouseDown:()=>{r(d[e])},onMouseOver:({buttons:a})=>{a===1&&r(d[e])}})));function G(e){const a=b.value.length,v=Math.floor(a/2),t=3,l=Math.floor(v/t);let s=e%t+1,c=Math.ceil((e+1)/t);return e>=v&&(s+=t,c-=l),`${c}/${s}/${c}/${s+1}`}const i=()=>{const a=n.value.createGain();return a.gain.setValueAtTime(.1,0),a.connect(n.value.destination),a},r=e=>{const t=n.value.createOscillator();t.frequency.setValueAtTime(e,0);const l=new Float32Array([0,0,1,0,1]),s=new Float32Array(l.length),c=n.value.createPeriodicWave(s,l);t.setPeriodicWave(c);const u=n.value.createGain();u.gain.setValueAtTime(1,0),u.gain.exponentialRampToValueAtTime(1e-4,n.value.currentTime+3),t.connect(u),u.connect(i()),t.start(),t.stop(n.value.currentTime+3),t.addEventListener("ended",()=>{t.disconnect()})};function y({code:e}){!o.value[e]&&g[e]!==void 0&&(o.value[e]=!0,r(d[g[e]]))}function D({code:e}){o.value[e]&&(o.value[e]=!1)}B(()=>{n.value=new AudioContext,window.addEventListener("keydown",y),window.addEventListener("keyup",D)}),h(()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",D)});const _={audioContext:n,isKeyDown:o,keys:b,getGridArea:G,getGain:i,PlayNote:r,onKeyDown:y,onKeyUp:D};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),P={class:"flex-1 grid grid-cols-6 gap-2 p-2"},T=["onMousedown","onMouseover"];function x(K,E,n,o,b,G){return A(),m("div",P,[(A(!0),m(w,null,F(o.keys,(i,r)=>(A(),m("button",{class:"border rounded-xl p-3 hover:bg-neutral-700 active:bg-neutral-700 select-none",style:M(`grid-area: ${o.getGridArea(r)};`),key:i.text,onMousedown:i.onMouseDown,onMouseover:i.onMouseOver},k(i.text.split("/")[0]),45,T))),128))])}const V=f(L,[["render",x]]);export{V as default};
