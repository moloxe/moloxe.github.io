<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><meta property="og:title" content="Tina"><meta name="twitter:title" content="Tina"><!-- <meta property="og:url" content={canonicalHref} /> --><meta name="generator" content="Astro v5.13.7"><title>Tina</title><link rel="icon" type="image/svg+xml" href="/favicon.svg"><!-- <link rel="canonical" href={canonicalHref} /> --><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.U4jOVs4w.js"></script><link rel="stylesheet" href="/_astro/index.jVteX0gD.css">
<link rel="stylesheet" href="/_astro/index.C_nTHtqA.css">
<style>a[data-astro-cid-ob7qyy3l]{color:var(--primary)}.tina-logo[data-astro-cid-ob7qyy3l]{border-radius:8px;filter:grayscale(1) contrast(1.5) brightness(6) invert(1) opacity(.8)}
pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-built_in,.hljs-class .hljs-title,.hljs-title.class_{color:#e6c07b}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}
</style></head> <body> <img class="absolute w-0 h-0" src="https://librecounter.org/counter.svg" loading="eager" decoding="async" referrerpolicy="unsafe-url" id="libre-counter"> <div class="absolute w-0 h-0" data-astro-transition-persist="astro-bfx3ztbg-1"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="1EHrjx" prefix="s0" component-url="/_astro/index.Dsb0rzSj.js" component-export="default" renderer-url="/_astro/client.YuukYgdX.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;OnekoStack&quot;,&quot;value&quot;:true}" await-children><!--[--><!--]--><!--astro:end--></astro-island> </div> <p class="text-xs font-mono p-2 text-neutral-400 leading-5 break-all"> <a href="/" class="hover:text-white">Home</a>  / <a href="/re-tina" class="hover:text-white">re-tina</a>  </p>  <main class="flex flex-col gap-10 p-2 justify-center w-full max-w-2xl m-auto" data-astro-cid-ob7qyy3l> <div class="flex w-full items-end gap-4" data-astro-cid-ob7qyy3l> <p class="text-4xl font-mono mb-[6%]" data-astro-cid-ob7qyy3l>Re</p> <div data-astro-cid-ob7qyy3l> <img src="/_astro/tina.4YsElRAf.jpeg" alt="Tina logo" class="tina-logo" data-astro-cid-ob7qyy3l> </div> </div> <div data-astro-cid-ob7qyy3l>ReTina, raymarch engine for the gang.</div> <astro-island uid="Z9elpY" prefix="r1" component-url="/_astro/ReTinaExamples.D2wvf3ng.js" component-export="default" renderer-url="/_astro/client.Bz692-Ao.js" props="{&quot;examples&quot;:[1,[[0,{&quot;route&quot;:[0,&quot;basic-game-of-life&quot;],&quot;sketch&quot;:[0,&quot;import { ReTina } from &#39;@ReTina&#39;\nimport TinaLogo from &#39;@src/assets/img/tina.jpeg&#39;\nimport { loadImage } from &#39;./utils/loadImage&#39;\n\nconst img = await loadImage(TinaLogo.src)\n\nconst rt = new ReTina({\n  fps: 24,\n  height: 128,\n  texs: [{ width: img.width, height: img.height }],\n  usePrevFrameTex: true,\n  functions: /* wgsl */ `\n    fn isPixAlive(pos: vec2f) -&gt; vec3f {\n      return step(vec3f(0.5), getPrevFrameTexSample(pos).rgb);\n    }\n    fn golRule(_isAlive: f32, _nCount: f32) -&gt; f32 {\n      let isAlive = round(_isAlive) &gt; 0.5;\n      let nCount = round(_nCount);\n      if isAlive {\n        if nCount == 2 || nCount == 3 {\n          return 1f;\n        }\n      } else if nCount == 3 {\n        return 1f;\n      }\n      return 0f;\n    }\n  `,\n  main: /* wgsl */ `\n    if (U.time &lt; 1) {\n      return getTex0Sample(uv).bgra; // TODO: bgra?\n    } else {\n      let res = vec2f(U.width, U.height);\n      var nCount = vec3f(0);\n      for (var i = -1; i &lt;= 1; i = i + 1) {\n        for (var j = -1; j &lt;= 1; j = j + 1) {\n          if (i == 0 &amp;&amp; j == 0) {\n            continue;\n          }\n          let pos = uv + vec2f(f32(i), f32(j)) / res;\n          nCount += isPixAlive(pos);\n        }\n      }\n      let isAlive = isPixAlive(uv);\n      let newState = vec3f(\n        golRule(isAlive.x, nCount.x),\n        golRule(isAlive.y, nCount.y),\n        golRule(isAlive.z, nCount.z)\n      );\n      return vec4f(newState, 1);\n    }\n  `,\n})\n\nawait rt.build()\n\nrt.setTex(0, img.textureData)\nrt.run()\n&quot;]}],[0,{&quot;route&quot;:[0,&quot;basic-voronoi&quot;],&quot;sketch&quot;:[0,&quot;import { ReTina } from &#39;@ReTina&#39;\n\nconst rt = new ReTina({\n  functions: /* wgsl */ `\n    const nPoints = 12;\n    const power = 2f;\n    fn pdist(pos1: vec2f, pos2: vec2f) -&gt; f32 {\n      return pow(\n        pow(abs(pos1.x - pos2.x), power) +\n        pow(abs(pos1.y - pos2.y), power), 1 / power);\n    }\n  `,\n  main: /* wgsl */ `\n    let xy = uv * vec2f(U.width, U.height);\n\n    var minD = 1e9;\n    var minIndex = -1;\n    let t = U.time * 0.03;\n    for (var i: i32 = 0; i &lt; nPoints; i++) {\n      let x = (snoise(vec2f(f32(i), t)) * 0.5 + 0.5) * U.width;\n      let y = (snoise(vec2f(f32(i) + 1e3, t)) * 0.5 + 0.5) * U.height;\n      let dist = pdist(xy, vec2f(x, y));\n      if dist &lt; minD {\n        minD = dist;\n        minIndex = i;\n      }\n    }\n\n    let dMouse = pdist(xy, vec2f(U.mouseX, U.mouseY));\n    var hue = f32(minIndex) / f32(nPoints);\n    if dMouse &lt; minD {\n        hue = 1.;\n        minD = dMouse;\n    }\n    var color = mix(\n      hsv2rgb(vec3f(hue, .6, 1)),\n      vec3(0.),\n      log(minD / 10) / 4\n    );\n    return vec4f(color, 1);\n  `,\n})\n\nconst setMouseX = rt.registerUniform(&#39;mouseX&#39;)\nconst setMouseY = rt.registerUniform(&#39;mouseY&#39;)\n\ndocument.addEventListener(&#39;mousemove&#39;, (event) =&gt; {\n  setMouseX(event.clientX)\n  setMouseY(event.clientY)\n})\n\nawait rt.buildAndRun()\n&quot;]}],[0,{&quot;route&quot;:[0,&quot;rm-fractal-env&quot;],&quot;sketch&quot;:[0,&quot;import { ReTina } from &#39;@ReTina&#39;\nimport freeControls from &#39;./utils/freeControls&#39;\n\nconst rt = new ReTina({\n  showFps: true,\n  height: 512,\n  useInterlacing: true,\n})\n\n// Based on: https://shaders.skia.org/?id=ed72577c437c036447372e4c873462fc1bbfc0cb5e9fb0630ab1c07368a0db48\nrt.registerMaterial({\n  sdFunc: /* wgsl */ `\n    pos.z -= U.time * 0.5;\n    pos = asin(sin(pos)) - vec3&lt;f32&gt;(3.0);\n    for (var i = 0; i &lt; 9; i++) {\n        pos = abs(vec3&lt;f32&gt;(pos.xz, pos.y).xzy);\n        if (pos.x &lt; pos.y) {\n            pos = pos.zxy;\n        } else {\n            pos = pos.zyx;\n        }\n        pos = pos + pos - vec3&lt;f32&gt;(1.0, 3.0, 7.0);\n    }\n    let dist = max(pos.x, pos.z) / 1000.0 - 0.01;\n    return dist;\n  `,\n  lightFunc: /* wgsl */ `\n    var spec = 0.;\n    let lambertian = dot(normal, -rd);\n    if lambertian &gt; 0. {\n        let lightDir = normalize(ro - pos);\n        let halfDir = normalize(lightDir + -rd);\n        spec = pow(max(dot(halfDir, normal), 0.), 2000.);\n    }\n    var dd = length(pos - ro); dd = 1 + (dd * dd  * .01);\n    var out = normal * normal;\n    out = rgb2hsv(out);\n    out = hsv2rgb(vec3&lt;f32&gt;(out.x + U.time * .2 + sin(pos.x + pos.y) / 4., .6, .6));\n    out = (out * lambertian + spec) / dd;\n    return vec4&lt;f32&gt;(out, 1.);\n  `,\n})\n\nawait rt.build()\n\nrt.camera.fov = 100\nrt.camera.spherical = {\n  radius: 0,\n  phi: 0,\n  theta: 0.2,\n}\n\nfreeControls(rt)\nrt.buildAndRun()\n&quot;]}],[0,{&quot;route&quot;:[0,&quot;rm-mandelbulb&quot;],&quot;sketch&quot;:[0,&quot;import { ReTina } from &#39;@ReTina&#39;\nimport freeControls from &#39;./utils/freeControls&#39;\n\n// Shader based on: https://webgpulab.xbdev.net/index.php?page=editor&amp;id=mandelbulbbasic3&amp;\nconst rt = new ReTina({\n  height: 512,\n  useInterlacing: true,\n  showFps: true,\n})\n\nrt.registerMaterial({\n  sdFunc: /* wgsl */ `\n    var thres = length(pos) - 1.2;\n    var power = 6 + 4 * sin(U.time * 0.1);\n    var z = pos;\n    var c = pos;\n    var dr = 1.0;\n    var r = 0.0;\n    for (var i: i32 = 0; i &lt; 16; i++) {\n        r = length(z);\n        if r &gt; 2.0 { break; }\n        var theta = acos(z.z / r);\n        var phi = atan2(z.y, z.x);\n        dr = pow(r, power - 1.0) * power * dr + 1.0;\n        var zr = pow(r, power);\n        theta *= power;\n        phi *= power;\n        z = zr * vec3(sin(theta) * cos(phi), sin(phi) * sin(theta), cos(theta));\n        z += c;\n    }\n    return 0.5 * log(r) * r / dr;\n  `,\n  lightFunc: /* wgsl */ `\n    let lightPos = toCartesian(vec3f(2, toSpherical(ro).yz));\n    let hue = toSpherical(pos).y + U.time * 0.2;\n    let diffuseColor = hsv2rgb(vec3f(hue, 0.5, 1));\n    let lightColor = hsv2rgb(vec3f(0.2));\n    let light = blinnPhong(\n      // Environment\n      rd, normal, /* minBright */ 0,\n      // Material\n      pos, diffuseColor, /* shininess */ 128,\n      // Light\n      lightPos, lightColor, /* power */ 8,\n    );\n    return vec4f(light, 1.);\n  `,\n})\n\nrt.camera = {\n  fov: 60,\n  pos: {\n    x: 0.6,\n    y: 0.8,\n    z: 1.5,\n  },\n  spherical: {\n    phi: -0.5,\n    radius: 0,\n    theta: 0.4,\n  },\n}\n\nfreeControls(rt)\n\nawait rt.buildAndRun()\n&quot;]}],[0,{&quot;route&quot;:[0,&quot;rm-modeling&quot;],&quot;sketch&quot;:[0,&quot;import { ReTina } from &#39;@ReTina&#39;\nimport freeControls from &#39;./utils/freeControls&#39;\n\nconst rt = new ReTina({\n  showFps: true,\n  height: 512,\n  useInterlacing: true,\n})\n\n// Head\nrt.registerMaterial({\n  color: { r: 0.5, g: 0.5, b: 0.5 },\n  sdFunc: /* wgsl */ `\n    let dBox = sdBox(pos, vec3&lt;f32&gt;(0.26, 0.14, 0.08));\n    let dSphere = sdSphere(pos, 0.1);\n    return opSmoothUnion(dBox, dSphere, 0.5);\n  `,\n  lightFunc: /* wgsl */ `\n    let minBright = 0.5;\n    let diffuseColor = color;\n    let shininess = 256.;\n    let lightPos = toCartesian(vec3f(1.3, PI / 2., PI / 2.));\n    let lightColor = vec3f(1);\n    let power = 1.;\n    let light = blinnPhong(\n      // Environment\n      rd, normal, minBright,\n      // Material\n      pos, diffuseColor, shininess,\n      // Light\n      lightPos, lightColor, power,\n    );\n    return vec4f(light, 1.);\n  `,\n})\n\n// Sun glasses\nrt.registerMaterial({\n  pos: { x: 0, y: 0.03, z: 0.22 },\n  color: { r: 0, g: 0, b: 0 },\n  sdFunc: /* wgsl */ `\n    let left  = sdBox(pos - vec3&lt;f32&gt;(0.15, 0.0, 0.0), vec3&lt;f32&gt;(0.12, 0.08, 0.001));\n    let right = sdBox(pos - vec3&lt;f32&gt;(-0.15, 0.0, 0.0), vec3&lt;f32&gt;(0.12, 0.08, 0.001));\n    let mid = sdCapsule(pos - vec3&lt;f32&gt;(0.0, 0.04, 0.0), vec3&lt;f32&gt;(0.05, 0, 0), vec3&lt;f32&gt;(-0.05, 0, 0), 0.01);\n    return opSmoothUnion(min(left, right), mid, 0.02);\n  `,\n  lightFunc: /* wgsl */ `\n    let minBright = 0.;\n    let diffuseColor = color;\n    let shininess = 2056.;\n    let lightPos = toCartesian(vec3f(1.3, 0, 0));\n    let lightColor = vec3f(1);\n    let power = 2.;\n    let light = blinnPhong(\n      // Environment\n      rd, normal, minBright,\n      // Material\n      pos, diffuseColor, shininess,\n      // Light\n      lightPos, lightColor, power,\n    );\n    return vec4f(light, 1.);\n  `,\n})\n\n// Body\nrt.registerMaterial({\n  sdFunc: /* wgsl */ `\n    let dBody = sdCapsule(pos, vec3&lt;f32&gt;(0, -0.32, 0), vec3&lt;f32&gt;(0, -0.4, 0), 0.08);\n    let leftLeg = sdCapsule(pos, vec3&lt;f32&gt;(-0.04, -0.45, 0), vec3&lt;f32&gt;(-0.07, -0.55, 0), 0.05);\n    let rightLeg = sdCapsule(pos, vec3&lt;f32&gt;(0.04, -0.45, 0), vec3&lt;f32&gt;(0.07, -0.55, 0), 0.05);\n    let dLegs = min(leftLeg, rightLeg);\n    return opSmoothUnion(dBody, dLegs, 0.04);\n  `,\n  lightFunc: /* wgsl */ `\n    var n = snoise3d(pos * 20.);\n    n = snoise3d(vec3&lt;f32&gt;(pos.xy, n + U.time)) * 0.5 + 0.5;\n    n = pow(n, 2.0);\n    let c = hsv2rgb(vec3&lt;f32&gt;(pos.y + U.time, 1.0 - n, n));\n    let lambertian = dot(normal, -rd);\n    return vec4&lt;f32&gt;(c * lambertian, 1.);\n  `,\n})\n\n// Environment\nrt.registerMaterial({\n  color: { r: 0.4, g: 0.4, b: 0.4 },\n  sdFunc: /* wgsl */ `\n    let dFloor = sdBox(pos - vec3&lt;f32&gt;(0, -1, 0), vec3&lt;f32&gt;(1, 0.01, 1));\n    let dWall = sdBox(pos - vec3&lt;f32&gt;(0, 0, -1), vec3&lt;f32&gt;(1, 1, 0.01));\n    return min(dFloor, dWall);\n  `,\n})\n\nrt.camera.fov = 60\nrt.camera.spherical.radius = 1.2\nrt.camera.spherical.theta = 0.3\n\nfreeControls(rt)\n\nawait rt.buildAndRun()\n&quot;]}],[0,{&quot;route&quot;:[0,&quot;rm-periodic-surface&quot;],&quot;sketch&quot;:[0,&quot;import { ReTina } from &#39;@ReTina&#39;\n\nconst rt = new ReTina()\n\nrt.registerMaterial({\n  sdFunc: `\n    let t = U.time * .3;\n    pos = rotate(pos, vec3&lt;f32&gt;(0, t, -t));\n    pos += vec3&lt;f32&gt;(cos(-t) * 16, 2.4, sin(-t) * 16);\n    return (sin(pos.y) - (cos(pos.x) + cos(pos.y) + cos(pos.z))) * .6;\n  `,\n  lightFunc: `\n    var c = normal * .5 + .5;\n    let dist = length(pos - ro);\n    let bri = pow(sin(dist * PI / 6.), 6.);\n    c *= (bri + U.pulse);\n    return vec4(c, 1.);\n  `,\n})\n\nlet pulse = 0\nconst setUniformPulse = rt.registerUniform(&#39;pulse&#39;, pulse)\n\nrt.canvas.addEventListener(&#39;click&#39;, () =&gt; {\n  pulse = 1\n  setUniformPulse(pulse)\n})\n\nlet lastTime = performance.now()\nawait rt.buildAndRun(() =&gt; {\n  const time = performance.now()\n  const pulseSlowdown = 0.2 / (time - lastTime)\n  lastTime = time\n  pulse -= pulseSlowdown\n  pulse = Math.max(0, pulse)\n  setUniformPulse(pulse)\n})\n&quot;]}],[0,{&quot;route&quot;:[0,&quot;rm-simplex-noise-terrain&quot;],&quot;sketch&quot;:[0,&quot;import { ReTina } from &#39;../_lib&#39;\n\nconst rt = new ReTina({\n  useInterlacing: true,\n  height: 256,\n  main: /* wgsl */ `\n    let scene = calcScene(uv);\n    var color = vec3f(0);\n    if scene.dist &gt; 0 {\n        color = round(scene.color.rgb * 16) / 16;\n    }\n    return vec4f(color, 1);\n  `,\n  functions: /* wgsl */ `\n    fn getLightPos() -&gt; vec3f {\n      return vec3f(0, 2, U.camPosZ - 10);\n    }\n  `,\n})\n\nrt.registerMaterial({\n  sdFunc: &#39;return sdSphere((pos - getLightPos()), 1);&#39;,\n  lightFunc: &#39;return vec4f(1);&#39;,\n})\n\nrt.registerMaterial({\n  sdFunc: /* wgsl */ `\n    let terrain = (pos.y - snoise3d(vec3f(pos.xz, pos.y - U.time / 10))) / 6;\n    let capsule = sdCapsule(pos, vec3f(U.camPosX, U.camPosY, U.camPosZ), getLightPos(), 0.2);\n    return opSmoothSubtraction(capsule, terrain, .1);\n  `,\n  lightFunc: /* wgsl */ `\n    let minBright = 0.1;\n    let diffuseColor = color;\n    let shininess = 1024f;\n    let lightPos = getLightPos();\n    let lightColor = vec3f(0.8, 0.9, 0.9);\n    let power = 128f;\n    let light = blinnPhong(\n      // Environment\n      rd, normal, minBright,\n      // Material\n      pos, diffuseColor, shininess,\n      // Light\n      lightPos, lightColor, power,\n    );\n    return vec4f(light, 1);\n  `,\n})\n\nawait rt.buildAndRun(() =&gt; {\n  const t = performance.now() / 1000\n  rt.camera.pos = { x: 0, y: 0.6, z: -t / 4 }\n  rt.camera.spherical = { radius: 0.1, theta: Math.sin(t / 2) / 2, phi: -0.3 }\n})\n&quot;]}]]],&quot;data-astro-cid-ob7qyy3l&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;ReTinaExamples&quot;,&quot;value&quot;:true}" await-children><ul><li><a href="/re-tina/basic-game-of-life" target="_blank" class="underline text-primary">basic-game-of-life</a> — Click again to open in new tab</li><li><a href="/re-tina/basic-voronoi" target="_blank" class="underline ">basic-voronoi</a></li><li><a href="/re-tina/rm-fractal-env" target="_blank" class="underline ">rm-fractal-env</a></li><li><a href="/re-tina/rm-mandelbulb" target="_blank" class="underline ">rm-mandelbulb</a></li><li><a href="/re-tina/rm-modeling" target="_blank" class="underline ">rm-modeling</a></li><li><a href="/re-tina/rm-periodic-surface" target="_blank" class="underline ">rm-periodic-surface</a></li><li><a href="/re-tina/rm-simplex-noise-terrain" target="_blank" class="underline ">rm-simplex-noise-terrain</a></li></ul><iframe src="/re-tina/basic-game-of-life" height="400" width="100%"></iframe><h1>basic-game-of-life</h1><pre class="bg-[#282c34] relative"><button class="top-2 right-2 px-2 rounded absolute text-sm border">Copy</button><code class="hljs language-javascript overflow-x-auto whitespace-pre"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ReTina</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@ReTina&#x27;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TinaLogo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@src/assets/img/tina.jpeg&#x27;</span>
<span class="hljs-keyword">import</span> { loadImage } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./utils/loadImage&#x27;</span>

<span class="hljs-keyword">const</span> img = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadImage</span>(<span class="hljs-title class_">TinaLogo</span>.<span class="hljs-property">src</span>)

<span class="hljs-keyword">const</span> rt = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReTina</span>({
  <span class="hljs-attr">fps</span>: <span class="hljs-number">24</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-number">128</span>,
  <span class="hljs-attr">texs</span>: [{ <span class="hljs-attr">width</span>: img.<span class="hljs-property">width</span>, <span class="hljs-attr">height</span>: img.<span class="hljs-property">height</span> }],
  <span class="hljs-attr">usePrevFrameTex</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">functions</span>: <span class="hljs-comment">/* wgsl */</span> <span class="hljs-string">`
    fn isPixAlive(pos: vec2f) -&gt; vec3f {
      return step(vec3f(0.5), getPrevFrameTexSample(pos).rgb);
    }
    fn golRule(_isAlive: f32, _nCount: f32) -&gt; f32 {
      let isAlive = round(_isAlive) &gt; 0.5;
      let nCount = round(_nCount);
      if isAlive {
        if nCount == 2 || nCount == 3 {
          return 1f;
        }
      } else if nCount == 3 {
        return 1f;
      }
      return 0f;
    }
  `</span>,
  <span class="hljs-attr">main</span>: <span class="hljs-comment">/* wgsl */</span> <span class="hljs-string">`
    if (U.time &lt; 1) {
      return getTex0Sample(uv).bgra; // TODO: bgra?
    } else {
      let res = vec2f(U.width, U.height);
      var nCount = vec3f(0);
      for (var i = -1; i &lt;= 1; i = i + 1) {
        for (var j = -1; j &lt;= 1; j = j + 1) {
          if (i == 0 &amp;&amp; j == 0) {
            continue;
          }
          let pos = uv + vec2f(f32(i), f32(j)) / res;
          nCount += isPixAlive(pos);
        }
      }
      let isAlive = isPixAlive(uv);
      let newState = vec3f(
        golRule(isAlive.x, nCount.x),
        golRule(isAlive.y, nCount.y),
        golRule(isAlive.z, nCount.z)
      );
      return vec4f(newState, 1);
    }
  `</span>,
})

<span class="hljs-keyword">await</span> rt.<span class="hljs-title function_">build</span>()

rt.<span class="hljs-title function_">setTex</span>(<span class="hljs-number">0</span>, img.<span class="hljs-property">textureData</span>)
rt.<span class="hljs-title function_">run</span>()
</code></pre><!--astro:end--></astro-island> </main>  </body></html> <footer class="py-16 flex justify-between max-w-2xl m-auto p-2" data-astro-cid-ob7qyy3l> <p data-astro-cid-ob7qyy3l>
© 2025. All content and pages are licensed under
<a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/" class="hover:text-white" data-astro-cid-ob7qyy3l>CC BY-SA 4.0</a> </p> <a href="/" data-astro-cid-ob7qyy3l>Home</a> </footer> 